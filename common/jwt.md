# JWT

: JSON Web Token ( https://jwt.io/ )

유저를 인증하고 식별하기 위한 토큰 기반 인증이다.

토큰은 서버가 아닌 클라이언트에 저장되기 때문에 메모리나 스토리지 등을 통해 세션을 관리했던 서버의 부담을 덜 수 있다.

핵심적인 특징은 토큰 자체에 사용자의 권한 정보나 서비스를 사용하기 위한 정보가 포함된다는 것이다. (self-contained : 자가 수용적 방식)

데이터가 많아지면 토큰이 커질 수 있으며 토큰이 한 번 발급된 이후 사용자의 정보를 바꾸더라도 토큰을 재발급하지 않는 이상 반영되지 않는다

### 구성요소

1. Header

- 1. type : 토큰의 타입을 지정
- 2. alg : 토큰 검증에 사용

2. Payload

- 1. register claim : 토큰 정보를 표현하기 위해 이미 정해진 종류의 데이터들(선택적 작성 가능)
- 2. public claim : 사용자 정의 클레임으로 공개용 정보를 위해 사용된다.(충돌방지를 위해 uri 포맷이용)
- 3. private claim : 사용자 정의 클레임으로 서버와 클라이언트 사이에 임의로 지정한 정보를 저장한다.

3. Signature

- 토큰을 인코딩하거나 유효성 검증을 할 때 사용하는 고유한 암호화 코드이다.
- 헤더와 페이로드의 값을 각각 BASE64로 인코딩하고, 인코딩한 값을 비밀 키를 이용해 헤더에서 정의한 알고리즘으로 해싱을 하고, 이 값을 다시 BASE64로 인코딩하여 생성한다.

### 장 & 단점

- 장점
  - 사용자 인증에 필요한 모든 정보는 토큰 자체에 포함하기 때문에 별도의 인증 저장소가 필요없다.
  - URL 파라미터와 헤더로 사용
  - 디버깅 및 관리가 용이
  - 내장된 만료
- 단점
  - 토큰은 클라이언트에 저장되어 데이터베이스에서 사용자 정보를 조작하더라도 토큰에 직접 적용할 수 가 없다.
  - 더 많은 필드가 추가되면 토큰이 커진다.
  - 비상태 애플리케이션에서 토큰은 거의 모든 요청에 대해 전송되므로 데이터 트래픽 크기에 영향을 미칠 수가 있다.
