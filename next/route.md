### next/router 사용

pages 폴더 안에 컴포넌트를 생성하면 자동으로 경로가 설정된다.

(\* 경로명은 export되는 컴포넌트 이름이 아닌 파일명을 기준)

1. 정적 라우팅 : 사전에 지정된 주소로 이동

Link 컴포넌트를 사용해 주소를 이동 → react-router-dom 과 유사함

(SPA처럼, 클라이언트 사이드 라우팅으로 페이지 이동이 가능.)

```jsx
import Link from "next/Link";
...
return (
    <div>
      <h2>Link to 'tomato' Page</h2>
      <Link href="/tomato">
        <a>move to tomato</a>
      </Link>
    </div>
  );
```

Link 컴포넌트는 next/Link 모듈에서 불러오며 **href** 속성으로 이동할 경로를 지정한다.

다만 임의의 컴포넌트를 감쌀 시에는 라우팅 X. \<a> 로 감싸는게 젤 좋은듯

브라우저의 **History API**를 지원하여 뒤로가기를 하더라도 이전에 렌더링한 페이지를 불러온다.

1. 동적 라우팅

하나의 동적 경로에는 한 개의 동적 페이지만이 존재 가능함.

대괄호 [ ] 로 파일명을 감싸면 해당 페이지는 동적으로 경로가 지정되는 페이지가 됨.

```jsx
//동적 페이지가 존재하는 경로에서 대입한 주소를 쿼리명으로 갖는 페이지로 이동가능.
<div>
  <h2>Link to 'potato' Page</h2>
  <Link href="/vegetable/potato">
    <a>move to /vegetable/potato</a>
  </Link>
</div>
```

1. 라우터 객체 : 함수 내에서 라우팅을 수행하기 위해서는 라우터 객체를 활용.

next/router 모듈에서 **`useRouter`** 훅을 불러와서 사용.

<종류>

- **router.back()** : 직전 페이지로 이동
- **router.push("url")** : 지정한 경로로 이동 & 히스토리 스택에 URL 추가.
- **router.replace("url")** : 지정한 경로로 이동 & 히스토리 스택에 URL를 추가X.

그러나 SEO에 영향을 미치는 크롤러는 router.push() 가 다른 페이지로 이동하는 링크라고 인식X.

따라서 Link 컴포넌트를 활용해 시멘틱한 구조를 유지하는 것이 권장됨.

### pages component 구조

1. \_app.tsx : 클라이언트에서 띄우길 바라는 전체 컴포넌트로 최초로 실행되며 내부에 컴포넌트 가 있다면 전부 실행한다.
2. \_document.tsx : meta 태그를 정의하거나 전체 페이지에서 관리, 루트 파일이기에 가능한 적은 코드만 넣어야 한다.
3. 404.tsx : next에서는 서버에서 에러가 나오는(404 error) 경우 사용자에게 보여지는 페이지를 미리 커스터마이징 할 수 있다.

## **파일 기반 라우팅 vs 코드기반 라우팅**

### **파일 기반 라우팅(NextJS)**

- 추가 보일러플레이트 코드가 필요하지 않음
- 직관적인 시스템
- 파일 + 폴더 구조(pages 폴더 내의)가 라우팅에 영향을 미침
- 네비게이션은 Link 컴포넌트로 작동함

### **코드 기반 라우팅(React + react-router)**

- 보일러플레이트 코드가 세팅되야함 (Switch, Route 등)
- 이해하기 쉽지만, 새로운 컴포넌트와 내용이 포함되어 있음
- 파일 + 폴더를 세팅할 필요가 없음
- 네비게이션은 Link 컴포넌트로 작동함
