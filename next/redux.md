# redux-saga

### react/ redux 어플리케이션의 사이드 이펙트

ex) 데이터 fetching이나 브라우저 캐시에 접근하는 순수하지 않은 비동기 동작들을 더 쉽고 보기 좋게 만드는 것을 목적으로 하는 라이브러리.

- redux에서는 action을 발생시키면 reducer을 통해 state를 변화시켜 store을 갱신했다.
- redux-saga는 action과 reducer 사이에서 흐름을 제어하는 미들웨어로 reducer가 액션을 처리하기 전에 다양한 작업을 할 수 있다.
  ex) 기존의 요청 취소, 불필요한 중복요청 방지,비동기 작업 처리,
  \*\* 특정 액션이 발생했을 때 다른 액션을 발생 시키거나, 리덕스와 관계없는 코드 실행시 사용함.
  보다 간편하면서도 깊게 state의 흐름이 제거 가능.

<장점>

1. API 호출 로직을 효율적으로 관리할 수 있음.

   - async/await 보다 비동기적인 동작에 대한 세부적인 컨트롤이 가능하다.
     ex) 사용자가 동일한 API 요청을 여러번 호출하는 경우에 가장 마지막 결과만 받아오도록 설정함.
   - API 호출 로직을 saga에서 관리하면서 컴포넌트의 명확한 분리가 가능해짐.
   - 같은 API를 다른 페이지에서 호출 시 같은 호출 로직 코드를 두 번 작성하지 않고도 데이터만 간편하게 가져올 수 있다.(selector사용)

2. callback 함수를 action payload로 넘길 수 있다.

   - 기본 리덕스에서는 콜백을 state값으로 저장하는 것을 금지하고 있다. 따라서 saga를 사용하면 콜백값을 처리해주기 때문에 해당 값을 넘길 수 있게된다.
     ex) 공통으로 사용하는 모달창에서 확인 버튼을 누르는 경우, 모달창을 호출한 페이지에서 해당 사실을 확인 및 전달이 가능해진다.

### 동작원리

기본적으로 제너레이터 함수 문법을 기반으로 비동기 작업을 관리한다.

우리가 dispatch 하는 action을 모니터링해서 그에 따라 필요한 작업을 따로 수행할 수 있다.

\*\*제너레이터 안에서 while(true)를 사용하면 무한으로 사용가능한 로직이 가능한데, 사가에서 실제로 이걸 사용하여 지속적으로 action을 모니터링하는 로직을 수행

### 헬퍼함수

call ⇒ 각 동기 함수를 실행 // for ⇒ 각 비동기 함수를 실행
등등 ..

## 제네릭 함수 사용 : function\* 키워드 사용

제너레이터 함수를 호출했을때는 한 객체가 반환됨 (제너레이터)

ex)

```
function* 함수명 () {
	yield 실행될 내용~~
}
```

제네레이터 함수를 호출한다고 해서 해당 함수 안의 코드가 바로 시작되는것이 아니라 generator.next()를 호출해야만 실행되는 구조. => yield를 한 값을 반환하고 난 뒤에 코드의 흐름을 멈춘다.(yield === return 개념)

코드의 흐름이 멈추고 나서는 generator.next()를 다시 호출하면 흐름이 이어서 다시 시작된다.
